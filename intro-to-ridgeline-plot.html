<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Intro to Ridgeline Plot | Community contributions for EDAV Fall 2019</title>
  <meta name="description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Intro to Ridgeline Plot | Community contributions for EDAV Fall 2019" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  <meta name="github-repo" content="jtr13/cc19" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Intro to Ridgeline Plot | Community contributions for EDAV Fall 2019" />
  
  <meta name="twitter:description" content="This book will hold all community contributions for STAT GR 5702 Fall 2019 at Columbia University" />
  



<meta name="date" content="2019-10-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sample-project.html"/>
<link rel="next" href="maps.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html"><b>CC for EDAV 2019</b></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Instructions</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#preparing-your-.rmd-file"><i class="fa fa-check"></i><b>1.2</b> Preparing your <code>.Rmd</code> file</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#submission-steps"><i class="fa fa-check"></i><b>1.3</b> Submission Steps</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#optional-tweaks"><i class="fa fa-check"></i><b>1.4</b> Optional tweaks</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#faq"><i class="fa fa-check"></i><b>1.5</b> FAQ</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#what-should-i-expect-after-creating-a-pull-request"><i class="fa fa-check"></i><b>1.5.1</b> What should I expect after creating a pull request?</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#what-if-i-catch-mistakes-after-my-pull-request-is-merged"><i class="fa fa-check"></i><b>1.5.2</b> What if I catch mistakes after my pull request is merged?</a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#other-questions"><i class="fa fa-check"></i><b>1.5.3</b> Other questions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sample-project.html"><a href="sample-project.html"><i class="fa fa-check"></i><b>2</b> Sample Project</a></li>
<li class="chapter" data-level="3" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html"><i class="fa fa-check"></i><b>3</b> Intro to Ridgeline Plot</a><ul>
<li class="chapter" data-level="3.1" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html#tldr"><i class="fa fa-check"></i><b>3.2</b> tl;dr</a></li>
<li class="chapter" data-level="3.3" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html#simple-examples"><i class="fa fa-check"></i><b>3.3</b> Simple examples</a></li>
<li class="chapter" data-level="3.4" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html#theory"><i class="fa fa-check"></i><b>3.4</b> Theory</a></li>
<li class="chapter" data-level="3.5" data-path="intro-to-ridgeline-plot.html"><a href="intro-to-ridgeline-plot.html#external-resources"><i class="fa fa-check"></i><b>3.5</b> External resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>4</b> Spatial Data</a><ul>
<li class="chapter" data-level="4.1" data-path="maps.html"><a href="maps.html#choropleth-maps"><i class="fa fa-check"></i><b>4.1</b> Choropleth maps</a></li>
<li class="chapter" data-level="4.2" data-path="maps.html"><a href="maps.html#square-bins"><i class="fa fa-check"></i><b>4.2</b> Square bins</a></li>
<li class="chapter" data-level="4.3" data-path="maps.html"><a href="maps.html#longitude-latitude-data"><i class="fa fa-check"></i><b>4.3</b> Longitude / Latitude data</a><ul>
<li class="chapter" data-level="4.3.1" data-path="maps.html"><a href="maps.html#stamen-maps-and-ggmaps"><i class="fa fa-check"></i><b>4.3.1</b> Stamen Maps and ggmaps</a></li>
<li class="chapter" data-level="4.3.2" data-path="maps.html"><a href="maps.html#mutilayerd-plots-with-ggmaps"><i class="fa fa-check"></i><b>4.3.2</b> Mutilayerd plots with ggmaps</a></li>
<li class="chapter" data-level="4.3.3" data-path="maps.html"><a href="maps.html#getting-deeper"><i class="fa fa-check"></i><b>4.3.3</b> Getting Deeper</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="workshop.html"><a href="workshop.html"><i class="fa fa-check"></i><b>5</b> Workshop</a><ul>
<li class="chapter" data-level="5.1" data-path="workshop.html"><a href="workshop.html#edav-community-contribution-bookdown-workshop-summary"><i class="fa fa-check"></i><b>5.1</b> EDAV Community Contribution-Bookdown workshop summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cartodb-tutorial.html"><a href="cartodb-tutorial.html"><i class="fa fa-check"></i><b>6</b> CartoDB Tutorial</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Community contributions for EDAV Fall 2019</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro-to-ridgeline-plot" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Intro to Ridgeline Plot</h1>
<p>Hojin Lee and Hyuk Joon Kwon</p>
<div id="overview" class="section level2">
<h2><span class="header-section-number">3.1</span> Overview</h2>
<p>Ridgeline plot is a set of overlapped density plots, and it helps us to compare multiple distirbutions among dataset. Professor Claus O. Wilke from UT Austin, who created ggridges package, commented about ridgeline plot as below:</p>
<p>“Ridgeline plots are partially overlapping line plots that create the impression of a mountain range. They can be quite useful for visualizing changes in distributions over time or space. These types of plots have also been called “joyplots”, in reference to the iconic cover art for Joy Division’s album Unknown Pleasures. However, given the unfortunate origin of the name Joy Division, the term “joyplot” is now discouraged.&quot;</p>
<p>In this section, we will discuss how to create ridgeline plots using the ggplot and ggridges libraries.</p>
</div>
<div id="tldr" class="section level2">
<h2><span class="header-section-number">3.2</span> tl;dr</h2>
<p>For those who do not want to go through the documents, the below is the polished version of a ridgeline plot and the codes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(ucidata)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">library</span>(ggplot2)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">library</span>(ggridges)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="kw">library</span>(viridis)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw">library</span>(plyr)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="kw">library</span>(nycflights13)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">weather<span class="op">$</span>month &lt;-<span class="st"> </span><span class="kw">as.factor</span>(weather<span class="op">$</span>month)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="kw">ggplot</span>(weather, <span class="kw">aes</span>(<span class="dt">x =</span> temp, <span class="dt">y =</span> <span class="kw">reorder</span>(month, <span class="kw">desc</span>(month)), <span class="dt">fill =</span> <span class="kw">factor</span>(..quantile..))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">    </span><span class="kw">stat_density_ridges</span>(<span class="dt">quantiles =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                        , <span class="dt">quantile_lines =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12">                        , <span class="dt">geom =</span> <span class="st">&quot;density_ridges_gradient&quot;</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">                        , <span class="dt">alpha =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">                        , <span class="dt">scale =</span> <span class="fl">2.3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw">scale_fill_viridis</span>(<span class="dt">discrete =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16">                       , <span class="dt">name =</span> <span class="st">&quot;Quantile&quot;</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17">                       , <span class="dt">alpha =</span> <span class="fl">0.3</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">                       , <span class="dt">option =</span> <span class="st">&quot;cividis&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;What is the weather like in NYC?&quot;</span>,</a>
<a class="sourceLine" id="cb2-20" data-line-number="20">          <span class="dt">subtitle =</span> <span class="st">&quot;Ridgeline plot for NYC temperature by months&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Temperature (F)&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Months&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">caption =</span> <span class="st">&quot;Source: nycflights13::weather&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.subtitle =</span> <span class="kw">element_text</span>(<span class="dt">face=</span><span class="st">&quot;bold&quot;</span>, <span class="dt">color=</span><span class="st">&quot;grey&quot;</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.caption=</span><span class="kw">element_text</span>(<span class="dt">color=</span><span class="st">&quot;grey&quot;</span>))</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-1-1.png" width="672" />
For more information about dataset, type ?nycflights13::weather into the console.</p>
</div>
<div id="simple-examples" class="section level2">
<h2><span class="header-section-number">3.3</span> Simple examples</h2>
<p>For one who needs friendly step by step approach, please read the below.</p>
<p>First, we need to install ggridges and ggplot2 packages.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">#install.packages(&quot;ggridges&quot;)</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#install.packages(&quot;ggplot2&quot;)</span></a></code></pre></div>
<p>Make sure that the y variable is a categorical variable, otherwise the function will throw an error. You can use y = as.factor(data) to transfrom your y variable into a categorical variable.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">data &lt;-<span class="st"> </span>forest_fires</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">data<span class="op">$</span>day &lt;-<span class="st"> </span><span class="kw">factor</span>(data<span class="op">$</span>day</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">                   , <span class="dt">levels=</span> <span class="kw">rev</span>(<span class="kw">c</span>(<span class="st">&quot;sun&quot;</span>, <span class="st">&quot;mon&quot;</span>, <span class="st">&quot;tue&quot;</span>, <span class="st">&quot;wed&quot;</span>, <span class="st">&quot;thu&quot;</span>, <span class="st">&quot;fri&quot;</span>, <span class="st">&quot;sat&quot;</span>)))</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> DMC, <span class="dt">y =</span> day)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_density_ridges</span>()</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>If you do not want the ridgeline plot to touch each other, please use the scale variable. A scale of 1.0 will make the adjust graph to barely touch each other. If the scale is greater than 1 the graphs will overlap with each other. Otherwise, if the scale is less than 1 the graphs will not touch each other.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">data &lt;-<span class="st"> </span>forest_fires</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">data<span class="op">$</span>day &lt;-<span class="st"> </span><span class="kw">factor</span>(data<span class="op">$</span>day</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                   , <span class="dt">levels=</span> <span class="kw">rev</span>(<span class="kw">c</span>(<span class="st">&quot;sun&quot;</span>, <span class="st">&quot;mon&quot;</span>, <span class="st">&quot;tue&quot;</span>, <span class="st">&quot;wed&quot;</span>, <span class="st">&quot;thu&quot;</span>, <span class="st">&quot;fri&quot;</span>, <span class="st">&quot;sat&quot;</span>)))</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> DMC, <span class="dt">y =</span> day)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_density_ridges</span>(<span class="dt">scale =</span> <span class="fl">1.1</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>There is a raindrop function within ridgeline plots, which combine the rideline plots with scatter plots; the function will plot scatter plot under the rideline plot.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(ISwR)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">data2 &lt;-<span class="st"> </span>red.cell.folate</a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">ggplot</span>(data2, <span class="kw">aes</span>(<span class="dt">x =</span> folate, <span class="dt">y =</span> ventilation)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw">stat_density_ridges</span>(<span class="dt">quantiles =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">                      , <span class="dt">geom=</span><span class="st">&quot;density_ridges_gradient&quot;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7">                      , <span class="dt">jittered_points =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">                      , <span class="dt">position =</span> <span class="st">&quot;raincloud&quot;</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">                      , <span class="dt">alpha =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10">                      , <span class="dt">scale =</span> <span class="fl">0.6</span>) </a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Morevoer, it is possible to divide the data into quantiles and draw lines in between. This way, it would be easier for us to observe the median value and the interquartile range.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">data &lt;-<span class="st"> </span>forest_fires</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">data<span class="op">$</span>day &lt;-<span class="st"> </span><span class="kw">factor</span>(data<span class="op">$</span>day</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">                   , <span class="dt">levels=</span> <span class="kw">rev</span>(<span class="kw">c</span>(<span class="st">&quot;sun&quot;</span>, <span class="st">&quot;mon&quot;</span>, <span class="st">&quot;tue&quot;</span>, <span class="st">&quot;wed&quot;</span>, <span class="st">&quot;thu&quot;</span>, <span class="st">&quot;fri&quot;</span>, <span class="st">&quot;sat&quot;</span>)))</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> temp, <span class="dt">y =</span> day, <span class="dt">fill =</span> <span class="kw">factor</span>(..quantile..))) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">  </span><span class="kw">stat_density_ridges</span>(<span class="dt">quantiles =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">                      , <span class="dt">quantile_lines =</span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8">                      , <span class="dt">geom=</span><span class="st">&quot;density_ridges_gradient&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="st">  </span><span class="kw">scale_fill_viridis</span>(<span class="dt">discrete =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10">                     , <span class="dt">name =</span> <span class="st">&quot;Quantile&quot;</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">                     , <span class="dt">option =</span> <span class="st">&quot;plasma&quot;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>In below, we have merged all the functions we have introduced, and here is the result!</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">data2 &lt;-<span class="st"> </span>red.cell.folate</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw">ggplot</span>(data2, <span class="kw">aes</span>(<span class="dt">x =</span> folate, <span class="dt">y =</span> ventilation, <span class="dt">fill =</span> <span class="kw">factor</span>(..quantile..))) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw">stat_density_ridges</span>(<span class="dt">quantiles =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">                      , <span class="dt">quantile_lines =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">                      , <span class="dt">geom=</span><span class="st">&quot;density_ridges_gradient&quot;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">                      , <span class="dt">jittered_points =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">                      , <span class="dt">position =</span> <span class="st">&quot;raincloud&quot;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">                      , <span class="dt">alpha =</span> <span class="fl">0.6</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10">                      , <span class="dt">scale =</span> <span class="fl">0.6</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="st">  </span><span class="kw">scale_fill_viridis</span>(<span class="dt">discrete=</span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">                     , <span class="dt">name =</span> <span class="st">&quot;Quantile&quot;</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">                     , <span class="dt">alpha =</span> <span class="fl">0.3</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">                     , <span class="dt">option =</span> <span class="st">&quot;cividis&quot;</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Here is one last cool feature of ridgeline plots where we can overlap distributions within same data group. This enables us to compare distributions not only among different data groups but also within same data groups.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">library</span>(vcd)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">data3 &lt;-<span class="st"> </span>Arthritis</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="kw">ggplot</span>(data3) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_density_ridges</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Age, <span class="dt">y =</span> Treatment, <span class="dt">group =</span> <span class="kw">interaction</span>(Treatment,Improved),<span class="dt">fill =</span> Improved), <span class="dt">alpha =</span> <span class="fl">0.7</span>)</a></code></pre></div>
<p><img src="cc19_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="theory" class="section level2">
<h2><span class="header-section-number">3.4</span> Theory</h2>
<p>Ridgeline plots are an overlap of histograms over y-axis, and this allows us to visualize and compare overall shape of distribution among different groups. They work very well when the dataset has high number of groups to show. Also, since we are overlapping distributions, we can save space for graphs. In other words, if the number of groups to represent is too small, plotting ridgeline plots might not be an optimal choice for data visualization.
On the other hand, the ridgeline plots work well when there are clear differences in distributions. Otherwise, because of overlaps, they would cause more confusion when deciphering the data.</p>
<p>Couple points to think about before plotting the ridgeline plots:</p>
<ul>
<li><p>Ordering of groups will change overall shape of the plots.</p></li>
<li><p>Figure out the optimal bin size &amp; bandwidth argument for the visualization.</p></li>
</ul>
</div>
<div id="external-resources" class="section level2">
<h2><span class="header-section-number">3.5</span> External resources</h2>
<p>The below has more examples with the ridgeline plots:</p>
<p><a href="https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html" class="uri">https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html</a></p>
<p><a href="https://cmdlinetips.com/2018/03/how-to-plot-ridgeline-plots-in-r/" class="uri">https://cmdlinetips.com/2018/03/how-to-plot-ridgeline-plots-in-r/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="sample-project.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jtr13/cc19/edit/master/ridgeline_plot.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
